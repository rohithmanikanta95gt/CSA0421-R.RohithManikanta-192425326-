#include <stdio.h>
#include <stdlib.h>

int cmp(const void *a, const void *b) {
    return (*(int *)a - *(int *)b);
}

int main() {
    int n, i, head, size, direction;
    printf("Enter number of requests: ");
    scanf("%d", &n);

    int req[n + 3];  // extra for head and 0 & last track

    printf("Enter request queue:\n");
    for (i = 0; i < n; i++)
        scanf("%d", &req[i]);

    printf("Enter initial head position: ");
    scanf("%d", &head);

    printf("Enter total disk size (last track number): ");
    scanf("%d", &size);

    printf("Enter direction (1 = right, 0 = left): ");
    scanf("%d", &direction);

    // Add head and boundary values
    req[n] = head;
    req[n + 1] = 0;
    req[n + 2] = size - 1;

    int total = n + 3;

    qsort(req, total, sizeof(int), cmp);

    int idx;
    for (i = 0; i < total; i++)
        if (req[i] == head)
            idx = i;

    int movement = 0;

    if (direction == 1) {  // moving right
        for (i = idx; i < total - 1; i++)
            movement += abs(req[i + 1] - req[i]);

        for (i = idx; i > 0; i--)
            movement += abs(req[i] - req[i - 1]);

    } else {  // moving left
        for (i = idx; i > 0; i--)
            movement += abs(req[i] - req[i - 1]);

        for (i = idx; i < total - 1; i++)
            movement += abs(req[i + 1] - req[i]);
    }

    printf("\nTotal Head Movement = %d\n", movement);

    return 0;
}
