#include <stdio.h>
int main() {
    int p,r,i,j,finish[10]={0},safe[10],cnt=0;
    int alloc[10][10], max[10][10], need[10][10], avail[10];

    printf("Enter no. of processes and resources: ");
    scanf("%d %d",&p,&r);

    printf("Enter Allocation matrix:\n");
    for(i=0;i<p;i++) for(j=0;j<r;j++) scanf("%d",&alloc[i][j]);

    printf("Enter Max matrix:\n");
    for(i=0;i<p;i++) for(j=0;j<r;j++) scanf("%d",&max[i][j]);

    printf("Enter Available resources: ");
    for(i=0;i<r;i++) scanf("%d",&avail[i]);

    for(i=0;i<p;i++) for(j=0;j<r;j++) need[i][j]=max[i][j]-alloc[i][j];

    while(cnt<p) {
        int found=0;
        for(i=0;i<p;i++)
            if(!finish[i]) {
                for(j=0;j<r;j++)
                    if(need[i][j] > avail[j]) break;
                if(j==r) {
                    for(j=0;j<r;j++) avail[j]+=alloc[i][j];
                    finish[i]=1; safe[cnt++]=i; found=1;
                }
            }
        if(!found) break;
    }

    if(cnt==p) {
        printf("\nSafe Sequence: ");
        for(i=0;i<p;i++) printf("P%d ",safe[i]);
    } else
        printf("\nSystem is NOT in safe state!");
}
